import{h as re,i as se,j as ie,k as ce,l as de,n as ve,o as fe,u as me,p as ge,q as xe,r as be,s as he,t as ye,v as Pe,w as we,x as X,y as Y,z as Z}from"./VDataTable-53f53020.js";import{p as le,g as oe,c as y,t as h,aL as Ve,aG as pe,f as ne,h as l,a2 as O,i as S,b6 as Se,bd as Te,be as Fe,u as De,b7 as Ie,r as G,s as Ce,j as ke,o as Re,w as H,b as Be,b9 as Ge,ba as ee,bf as He,bg as Ne,G as te,aM as _e,bh as Ee,bi as Me,aB as ze,al as K,bj as Ae,R as Oe,a as Ue}from"./index-2a140f76.js";import{V as ae}from"./VTable-acb00dfd.js";const je=le({itemsLength:{type:[Number,String],required:!0},...re(),...se(),...ie()},"VDataTableServer"),Je=oe()({name:"VDataTableServer",props:je(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,U){let{attrs:T,slots:t}=U;const{groupBy:r}=ce(e),{sortBy:o,multiSort:x,mustSort:j}=de(e),{page:P,itemsPerPage:F}=ve(e),L=y(()=>parseInt(e.itemsLength,10)),{columns:N,headers:_}=fe(e,{groupBy:r,showSelect:h(e,"showSelect"),showExpand:h(e,"showExpand")}),{items:v}=me(e,N),{toggleSort:D}=ge({sortBy:o,multiSort:x,mustSort:j,page:P}),{opened:w,isGroupOpen:$,toggleGroup:I,extractRows:q}=xe({groupBy:r,sortBy:o}),{pageCount:W,setItemsPerPage:J}=be({page:P,itemsPerPage:F,itemsLength:L}),{flatItems:E}=he(v,r,w),{isSelected:f,select:V,selectAll:C,toggleSelect:m,someSelected:c,allSelected:a}=ye(e,{allItems:v,currentPage:v}),{isExpanded:s,toggleExpand:n}=Pe(e),i=y(()=>q(v.value));we({page:P,itemsPerPage:F,sortBy:o,groupBy:r,search:h(e,"search")}),Ve("v-data-table",{toggleSort:D,sortBy:o}),pe({VDataTableRows:{hideNoData:h(e,"hideNoData"),noDataText:h(e,"noDataText"),loading:h(e,"loading"),loadingText:h(e,"loadingText")}});const u=y(()=>({page:P.value,itemsPerPage:F.value,sortBy:o.value,pageCount:W.value,toggleSort:D,setItemsPerPage:J,someSelected:c.value,allSelected:a.value,isSelected:f,select:V,selectAll:C,toggleSelect:m,isExpanded:s,toggleExpand:n,isGroupOpen:$,toggleGroup:I,items:i.value.map(b=>b.raw),internalItems:i.value,groupedItems:E.value,columns:N.value,headers:_.value}));ne(()=>{const b=X.filterProps(e),k=Y.filterProps(e),d=Z.filterProps(e),p=ae.filterProps(e);return l(ae,S({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},p),{top:()=>{var g;return(g=t.top)==null?void 0:g.call(t,u.value)},default:()=>{var g,R,M,z,A,B;return t.default?t.default(u.value):l(O,null,[(g=t.colgroup)==null?void 0:g.call(t,u.value),l("thead",{class:"v-data-table__thead",role:"rowgroup"},[l(Y,S(k,{sticky:e.fixedHeader}),t)]),(R=t.thead)==null?void 0:R.call(t,u.value),l("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(M=t["body.prepend"])==null?void 0:M.call(t,u.value),t.body?t.body(u.value):l(Z,S(T,d,{items:E.value}),t),(z=t["body.append"])==null?void 0:z.call(t,u.value)]),(A=t.tbody)==null?void 0:A.call(t,u.value),(B=t.tfoot)==null?void 0:B.call(t,u.value)])},bottom:()=>t.bottom?t.bottom(u.value):l(X,b,{prepend:t["footer.prepend"]})})})}});const Le=le({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Se(),...Te()},"VTextarea"),Ke=oe()({name:"VTextarea",directives:{Intersect:Fe},inheritAttrs:!1,props:Le(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,U){let{attrs:T,emit:t,slots:r}=U;const o=De(e,"modelValue"),{isFocused:x,focus:j,blur:P}=Ie(e),F=y(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),L=y(()=>{if(T.maxlength)return T.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function N(a,s){var n,i;!e.autofocus||!a||(i=(n=s[0].target)==null?void 0:n.focus)==null||i.call(n)}const _=G(),v=G(),D=Ce(""),w=G(),$=y(()=>e.persistentPlaceholder||x.value||e.active);function I(){var a;w.value!==document.activeElement&&((a=w.value)==null||a.focus()),x.value||j()}function q(a){I(),t("click:control",a)}function W(a){t("mousedown:control",a)}function J(a){a.stopPropagation(),I(),K(()=>{o.value="",Ae(e["onClick:clear"],a)})}function E(a){var n;const s=a.target;if(o.value=s.value,(n=e.modelModifiers)!=null&&n.trim){const i=[s.selectionStart,s.selectionEnd];K(()=>{s.selectionStart=i[0],s.selectionEnd=i[1]})}}const f=G(),V=G(+e.rows),C=y(()=>["plain","underlined"].includes(e.variant));ke(()=>{e.autoGrow||(V.value=+e.rows)});function m(){e.autoGrow&&K(()=>{if(!f.value||!v.value)return;const a=getComputedStyle(f.value),s=getComputedStyle(v.value.$el),n=parseFloat(a.getPropertyValue("--v-field-padding-top"))+parseFloat(a.getPropertyValue("--v-input-padding-top"))+parseFloat(a.getPropertyValue("--v-field-padding-bottom")),i=f.value.scrollHeight,u=parseFloat(a.lineHeight),b=Math.max(parseFloat(e.rows)*u+n,parseFloat(s.getPropertyValue("--v-input-control-height"))),k=parseFloat(e.maxRows)*u+n||1/0,d=Ue(i??0,b,k);V.value=Math.floor((d-n)/u),D.value=Oe(d)})}Re(m),H(o,m),H(()=>e.rows,m),H(()=>e.maxRows,m),H(()=>e.density,m);let c;return H(f,a=>{a?(c=new ResizeObserver(m),c.observe(f.value)):c==null||c.disconnect()}),Be(()=>{c==null||c.disconnect()}),ne(()=>{const a=!!(r.counter||e.counter||e.counterValue),s=!!(a||r.details),[n,i]=Ge(T),{modelValue:u,...b}=ee.filterProps(e),k=He(e);return l(ee,S({ref:_,modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":C.value},e.class],style:e.style},n,b,{centerAffix:V.value===1&&!C.value,focused:x.value}),{...r,default:d=>{let{id:p,isDisabled:g,isDirty:R,isReadonly:M,isValid:z}=d;return l(Ne,S({ref:v,style:{"--v-textarea-control-height":D.value},onClick:q,onMousedown:W,"onClick:clear":J,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},k,{id:p.value,active:$.value||R.value,centerAffix:V.value===1&&!C.value,dirty:R.value||e.dirty,disabled:g.value,focused:x.value,error:z.value===!1}),{...r,default:A=>{let{props:{class:B,...Q}}=A;return l(O,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[e.prefix]),te(l("textarea",S({ref:w,class:B,value:o.value,onInput:E,autofocus:e.autofocus,readonly:M.value,disabled:g.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:I,onBlur:P},Q,i),null),[[_e("intersect"),{handler:N},null,{once:!0}]]),e.autoGrow&&te(l("textarea",{class:[B,"v-textarea__sizer"],id:`${Q.id}-sizer`,"onUpdate:modelValue":ue=>o.value=ue,ref:f,readonly:!0,"aria-hidden":"true"},null),[[Ee,o.value]]),e.suffix&&l("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:s?d=>{var p;return l(O,null,[(p=r.details)==null?void 0:p.call(r,d),a&&l(O,null,[l("span",null,null),l(Me,{active:e.persistentCounter||x.value,value:F.value,max:L.value},r.counter)])])}:void 0})}),ze({},_,v,w)}});export{Je as V,Ke as a};
