import{T as h,r as k,o as y,Y as i,$ as V,a0 as t,ab as g,h as o,a5 as c,a8 as n,a7 as d,Z as u,a3 as x,a2 as w}from"./index-87fd04c1.js";import{V as D}from"./VContainer-139ab509.js";import{a as m,V as b}from"./VRow-7c709c95.js";import{V as v}from"./VDivider-0f572634.js";import{V as B}from"./VDataTable-c7a1954c.js";import"./VList-a6519ca5.js";import"./ssrBoot-35adf50d.js";import"./VChip-f21e9db1.js";import"./VSlideGroup-8f2e5436.js";import"./VTable-f4cb70ca.js";const A=d("h1",{class:"text-center mt-5 text-sixth"},"訂單管理",-1),R={__name:"OrdersView",setup(C){const{apiAuth:p}=g(),_=h(),l=k([]),f=[{title:"訂單編號",align:"center",key:"_id"},{title:"帳號",align:"center",key:"user.account"},{title:"取貨人",align:"center",key:"name"},{title:"取貨日",align:"center",key:"date"},{title:"取貨時間",align:"center",key:"time"},{title:"商品",align:"center",key:"cart",sortable:!1},{title:"訂購金額",key:"price",value:a=>a.cart.reduce((r,e)=>r+e.quantity*e.product.price,0)}];return y(async()=>{var a,r;try{const{data:e}=await p.get("/orders/all");l.value.push(...e.result)}catch(e){const s=((r=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";_({text:s,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"seventh",location:"bottom"}})}}),(a,r)=>(i(),V(D,null,{default:t(()=>[o(b,null,{default:t(()=>[o(m,{cols:"12"},{default:t(()=>[A]),_:1}),o(v),o(m,{cols:"12"},{default:t(()=>[o(B,{items:l.value,headers:f},{"item.createdAt":t(({item:e})=>[c(n(new Date(e.createdAt).toLocaleDateString()),1)]),"item.date":t(({item:e})=>[c(n(new Date(e.date).toLocaleDateString()),1)]),"item.cart":t(({item:e})=>[d("ul",null,[(i(!0),u(w,null,x(e.cart,s=>(i(),u("li",{key:s._id},n(s.product.name)+" * "+n(s.quantity),1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};export{R as default};
