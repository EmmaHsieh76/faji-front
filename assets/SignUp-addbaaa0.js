import{p as j,az as de,k as ce,g as X,C as me,r as U,c as E,f as J,V as z,h as a,a2 as be,i as R,aB as ve,aC as pe,aD as fe,aE as ge,v as Ve,u as he,aF as ye,z as xe,t as x,aG as we,R as Se,aH as Ce,T as L,Y as A,$ as G,a0 as l,a4 as t,aj as K,ak as w,a5 as B,ag as I,ab as Q,S as ke,U as _e,J as H}from"./index-6a5aed6f.js";import{v as q}from"./index-ee6bba0e.js";import{u as Z,a as S}from"./vee-validate.esm-6b503c03.js";import{c as ee,a as C,b as Te}from"./index.esm-639fe0e0.js";import{V as ae,a as te}from"./VRow-b83d30cd.js";import{V as oe}from"./VForm-7db4478f.js";import{m as Be,V as N}from"./VSlideGroup-2c6def6d.js";import{b as O,V as Pe}from"./VWindowItem-5a3d3f91.js";import{V as Y}from"./VContainer-f1c8b9b9.js";import"./ssrBoot-16a74009.js";const le=Symbol.for("vuetify:v-tabs"),$e=j({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...de(ce({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),F=X()({name:"VTab",props:$e(),setup(e,n){let{slots:b,attrs:f}=n;const{textColorClasses:v,textColorStyles:d}=me(e,"sliderColor"),g=U(),V=U(),c=E(()=>e.direction==="horizontal"),i=E(()=>{var p,u;return((u=(p=g.value)==null?void 0:p.group)==null?void 0:u.isSelected.value)??!1});function h(p){var m,s;let{value:u}=p;if(u){const o=(s=(m=g.value)==null?void 0:m.$el.parentElement)==null?void 0:s.querySelector(".v-tab--selected .v-tab__slider"),r=V.value;if(!o||!r)return;const P=getComputedStyle(o).color,y=o.getBoundingClientRect(),k=r.getBoundingClientRect(),$=c.value?"x":"y",M=c.value?"X":"Y",D=c.value?"right":"bottom",_=c.value?"width":"height",se=y[$],ne=k[$],T=se>ne?y[D]-k[D]:y[$]-k[$],re=Math.sign(T)>0?c.value?"right":"bottom":Math.sign(T)<0?c.value?"left":"top":"center",ie=(Math.abs(T)+(Math.sign(T)<0?y[_]:k[_]))/Math.max(y[_],k[_])||0,ue=y[_]/k[_]||0,W=1.5;pe(r,{backgroundColor:[P,"currentcolor"],transform:[`translate${M}(${T}px) scale${M}(${ue})`,`translate${M}(${T/W}px) scale${M}(${(ie-1)/W+1})`,"none"],transformOrigin:Array(3).fill(re)},{duration:225,easing:fe})}}return J(()=>{const p=z.filterProps(e);return a(z,R({symbol:le,ref:g,class:["v-tab",e.class],style:e.style,tabindex:i.value?0:-1,role:"tab","aria-selected":String(i.value),active:!1},p,f,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":h}),{...b,default:()=>{var u;return a(be,null,[((u=b.default)==null?void 0:u.call(b))??e.text,!e.hideSlider&&a("div",{ref:V,class:["v-tab__slider",v.value],style:d.value},null)])}})}),ve({},g)}});function Me(e){return e?e.map(n=>Ce(n)?n:{text:n,value:n}):[]}const Ue=j({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Be({mandatory:"force"}),...ge(),...Ve()},"VTabs"),ze=X()({name:"VTabs",props:Ue(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:b}=n;const f=he(e,"modelValue"),v=E(()=>Me(e.items)),{densityClasses:d}=ye(e),{backgroundColorClasses:g,backgroundColorStyles:V}=xe(x(e,"bgColor"));return we({VTab:{color:x(e,"color"),direction:x(e,"direction"),stacked:x(e,"stacked"),fixed:x(e,"fixedTabs"),sliderColor:x(e,"sliderColor"),hideSlider:x(e,"hideSlider")}}),J(()=>{const c=N.filterProps(e);return a(N,R(c,{modelValue:f.value,"onUpdate:modelValue":i=>f.value=i,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},d.value,g.value,e.class],style:[{"--v-tabs-height":Se(e.height)},V.value,e.style],role:"tablist",symbol:le}),{default:()=>[b.default?b.default():v.value.map(i=>a(F,R(i,{key:i.text}),null))]})}),{}}}),Ee={__name:"RegisterView",emits:[""],setup(e,{emit:n}){const{api:b}=Q(),f=L(),v=ee({account:C().required("帳號為信箱格式且必填欄位").test("isAccount","格式錯誤",s=>q.isEmail(s)),password:C().required("密碼為必填欄位").min(4,"密碼長度至少 4 個字").max(20,"密碼長度最多 20 個字"),passwordConfirm:C().required("密碼為必填欄位").min(4,"密碼長度至少 4 個字").max(20,"密碼長度最多 20 個字").oneOf([Te("password")],"密碼與確認密碼不相符"),name:C().required("姓名為必填欄位"),phone:C().required("手機號碼為必填欄位").test("isPhone","手機號碼格式錯誤",s=>q.isMobilePhone(s,"zh-TW"))}),{handleSubmit:d,isSubmitting:g}=Z({validationSchema:v}),V=S("account"),c=S("password"),i=S("passwordConfirm"),h=S("name"),p=S("phone"),u=n,m=d(async s=>{var o,r;try{await b.post("/users",{account:s.account,password:s.password,name:s.name,phone:s.phone}),u("submit-form"),f({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(P){const y=((r=(o=P==null?void 0:P.response)==null?void 0:o.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";f({text:y,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(s,o)=>(A(),G(I,{class:"pa-sm-16 py-sm-12 pa-8 py-2",rounded:"lg"},{default:l(()=>[a(ae,null,{default:l(()=>[a(te,{cols:"12"},{default:l(()=>[a(oe,{disabled:t(g),onSubmit:K(t(m),["prevent"])},{default:l(()=>[a(w,{label:"帳號",type:"email",class:"mb-3",placeholder:"a123456@gmail.com",modelValue:t(V).value.value,"onUpdate:modelValue":o[0]||(o[0]=r=>t(V).value.value=r),"error-messages":t(V).errorMessage.value,"prepend-inner-icon":"mdi-email-outline",variant:"outlined",hint:"帳號為信箱格式"},null,8,["modelValue","error-messages"]),a(w,{label:"密碼",type:"password",class:"mb-3",minlength:"4",maxlength:"20",counter:"",modelValue:t(c).value.value,"onUpdate:modelValue":o[1]||(o[1]=r=>t(c).value.value=r),"error-messages":t(c).errorMessage.value,"prepend-inner-icon":"mdi-lock-outline",variant:"outlined",hint:"密碼長度至少 4 個字，最多 20 個字"},null,8,["modelValue","error-messages"]),a(w,{label:"確認密碼",type:"password",class:"mb-3",minlength:"4",maxlength:"20",counter:"",modelValue:t(i).value.value,"onUpdate:modelValue":o[2]||(o[2]=r=>t(i).value.value=r),"error-messages":t(i).errorMessage.value,"prepend-inner-icon":"mdi-lock-alert-outline",variant:"outlined",hint:"確認密碼和密碼必須一致"},null,8,["modelValue","error-messages"]),a(w,{label:"姓名",type:"text",class:"mb-3",placeholder:"王小明",modelValue:t(h).value.value,"onUpdate:modelValue":o[3]||(o[3]=r=>t(h).value.value=r),"error-messages":t(h).errorMessage.value,"prepend-inner-icon":"mdi-account-circle-outline",variant:"outlined"},null,8,["modelValue","error-messages"]),a(w,{label:"手機號碼",type:"tel",class:"mb-3",placeholder:"0912345678",modelValue:t(p).value.value,"onUpdate:modelValue":o[4]||(o[4]=r=>t(p).value.value=r),"error-messages":t(p).errorMessage.value,"prepend-inner-icon":"mdi-cellphone",variant:"outlined"},null,8,["modelValue","error-messages"]),a(z,{type:"submit",color:"yellow-darken-4",block:"",size:"large",class:"font-weight-bold",variant:"tonal"},{default:l(()=>[B("註冊")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}},Re={__name:"LoginView",setup(e){const{api:n}=Q(),b=ke(),f=L(),v=_e(),d=U(!1),g=ee({account:C().required("帳號為信箱格式且必填欄位").test("isAccount","格式錯誤",u=>q.isEmail(u)),password:C().required("密碼為必填欄位").min(4,"密碼長度至少 4 個字").max(20,"密碼長度最多 20 個字")}),{handleSubmit:V,isSubmitting:c}=Z({validationSchema:g}),i=S("account"),h=S("password"),p=V(async u=>{var m,s;try{const{data:o}=await n.post("/users/login",{account:u.account,password:u.password});v.login(o.result),f({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),b.push("/")}catch(o){console.log(o);const r=((s=(m=o==null?void 0:o.response)==null?void 0:m.data)==null?void 0:s.message)||"發生錯誤，請稍後再試";f({text:r,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(u,m)=>(A(),G(I,{class:"pa-16 py-8",rounded:"lg"},{default:l(()=>[a(ae,null,{default:l(()=>[a(te,{cols:"12"},{default:l(()=>[a(oe,{disabled:t(c),onSubmit:K(t(p),["prevent"])},{default:l(()=>[a(w,{label:"帳號",type:"email",class:"mb-3",placeholder:"a123456@gmail.com",modelValue:t(i).value.value,"onUpdate:modelValue":m[0]||(m[0]=s=>t(i).value.value=s),"error-messages":t(i).errorMessage.value,"prepend-inner-icon":"mdi-email-outline",hint:"帳號為信箱格式",variant:"outlined"},null,8,["modelValue","error-messages"]),a(w,{label:"輸入您的密碼",class:"mb-3",minlength:"4",maxlength:"20",counter:"",hint:"密碼長度至少 4 個字，最多 20 個字","append-inner-icon":d.value?"mdi-eye-off":"mdi-eye",type:d.value?"text":"password","onClick:appendInner":m[1]||(m[1]=s=>d.value=!d.value),modelValue:t(h).value.value,"onUpdate:modelValue":m[2]||(m[2]=s=>t(h).value.value=s),"error-messages":t(h).errorMessage.value,"prepend-inner-icon":"mdi-lock-outline",variant:"outlined"},null,8,["append-inner-icon","type","modelValue","error-messages"]),a(z,{type:"submit",color:"yellow-darken-4",block:"",size:"large",class:"font-weight-bold",variant:"tonal"},{default:l(()=>[B(" 登入")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}},je={__name:"SignUp",setup(e){const n=U(1),b=()=>{n.value=1};return(f,v)=>(A(),G(I,{class:"mx-auto my-0 my-sm-6","max-width":"500",elevation:"4"},{default:l(()=>[a(ze,{modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=d=>n.value=d),color:"forth","align-tabs":"center","fixed-tabs":""},{default:l(()=>[a(F,{value:1,class:"font-weight-black"},{default:l(()=>[a(H,null,{default:l(()=>[B("mdi-login")]),_:1}),B("登入")]),_:1}),a(F,{value:2,class:"font-weight-black"},{default:l(()=>[a(H,null,{default:l(()=>[B("mdi-account-plus-outline")]),_:1}),B("註冊")]),_:1})]),_:1},8,["modelValue"]),a(Pe,{modelValue:n.value,"onUpdate:modelValue":v[1]||(v[1]=d=>n.value=d)},{default:l(()=>[a(O,{value:1},{default:l(()=>[a(Y,{fluid:""},{default:l(()=>[a(Re)]),_:1})]),_:1}),a(O,{value:2},{default:l(()=>[a(Y,{fluid:""},{default:l(()=>[a(Ee,{onSubmitForm:b})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{je as default};
